//knockout-kendo v0.2.0 | (c) 2012 Ryan Niemeyer | http://www.opensource.org/licenses/mit-license
(function(a,b,c){a.kendo=a.kendo||{},a.kendo.BindingFactory=function(){var c=this;this.createBinding=function(d){if(!b()[d.parent||d.name])return;var e={};e.init=function(a,b,f,g,h){var i=c.buildOptions(d,b,f);i.async||d.async&&i.async!==!1?setTimeout(function(){e.setup(a,i,h)},0):e.setup(a,i,h);if(d.templates)return{controlsDescendantBindings:!0}},e.setup=function(e,f,g){var h,i=b(e);c.handleEvents(d.events,f,function(){return i.data(d.name)}),c.setupTemplates(d.templates,f,e,g),h=c.getWidget(d,f,i,g),c.watchValues(h,f,d,e),h.destroy&&a.utils.domNodeDisposal.addDisposeCallback(e,function(){h.destroy()})},e.options={},e.widgetConfig=d,a.bindingHandlers[d.bindingName||d.name]=e},this.buildOptions=function(b,c,d){var e=b.defaultOption,f=a.utils.extend({},a.bindingHandlers[b.name].options),g=a.utils.unwrapObservable(c()),h=d();return h.widgetOptions&&a.utils.extend(f,h.widgetOptions),typeof g!="object"||e&&!(e in g)?f[e]=c():a.utils.extend(f,g),f};var d=function(b,c){return function(d){return a.renderTemplate(b,c.createChildContext(d))}};this.setupTemplates=function(c,e,f,g){function i(a,c,e,f){var g,h,j;for(g=0,h=a.length;g<h;g++){j=a[g];if(typeof j=="object"){var k=j;for(var l in k){if(typeof l=="undefined")continue;c[l]&&i(k[l],c[l],e,f)}}else if(b.isArray(c))for(var m=0;m<c.length;m++)i(a,c[m],e,f);else c[j]&&(c[j]=d(c[j],f))}}var h;c&&(i(c,e,f,g),h=e.dataBound,e.dataBound=function(){a.memoization.unmemoizeDomNodeAndDescendants(f),h&&h.apply(this,arguments)})},this.getWidget=function(b,c,d,e){var f;if(b.parent){var g=d.closest("[data-bind*="+b.parent+":]");f=g.length?g.data(b.parent):null}else f=d[b.name](a.toJS(c)).data(b.name);return a.isObservable(c.widget)&&c.widget(f),f},this.watchValues=function(b,d,e,f){var g,h=e.watch;if(h)for(g in h)h.hasOwnProperty(g)&&a.isObservable(d[g])&&c.watchOneValue(g,b,d,e,f)},this.watchOneValue=function(c,d,e,f,g){a.computed({read:function(){var h=f.watch[c],i=a.utils.unwrapObservable(e[c]),j=f.parent?[g,i]:[i];b.isArray(h)?h=d[i?h[0]:h[1]]:typeof h=="string"&&(h=d[h]),h&&h.apply(d,j)},disposeWhenNodeIsRemoved:g})},this.handleEvents=function(b,d,e){var f,g;if(b)for(f in b)b.hasOwnProperty(f)&&(g=b[f],g=typeof g=="string"?{value:g,writeTo:g}:g,a.isObservable(d[g.writeTo])&&c.handleOneEvent(f,g,d,e))},this.handleOneEvent=function(a,b,c,d){var e=c[a];c[a]=function(){var a=b.value,f=d(),g=typeof a=="string"&&f[a]?f[a]():a;c[b.writeTo](g),e&&e.apply(this,arguments)}}},a.kendo.bindingFactory=new a.kendo.BindingFactory,a.kendo.setDataSource=function(a,b){a.dataSource.data(b)};var d=a.kendo.bindingFactory.createBinding.bind(a.kendo.bindingFactory),e="close",f="collapse",g="content",h="data",i="disable",j="enable",k="expand",l="enabled",m="expanded",n="isOpen",o="max",p="min",q="open",r="search",s="select",t="selected",u="size",v="title",w="value",x="values";d({name:"kendoAutoComplete",events:{change:w,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,search:[r,e],data:function(b){a.kendo.setDataSource(this,b)},value:w}}),d({name:"kendoCalendar",defaultOption:w,events:{change:w},watch:{max:o,min:p,value:w}}),d({name:"kendoComboBox",events:{change:w,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,isOpen:[q,e],data:function(b){a.kendo.setDataSource(this,b)},value:w}}),d({name:"kendoDatePicker",defaultOption:w,events:{change:w,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,max:o,min:p,value:w,isOpen:[q,w]}}),d({name:"kendoDropDownList",events:{change:w,open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{enabled:j,isOpen:[q,e],data:function(b){a.kendo.setDataSource(this,b)},value:w}}),d({name:"kendoEditor",defaultOption:w,events:{change:w},watch:{enabled:j,value:w}}),d({name:"kendoGrid",defaultOption:h,watch:{data:function(b){a.kendo.setDataSource(this,b)}},templates:["rowTemplate","cellTemplate",{columns:["template","groupHeaderTemplate","groupFooterTemplate"]}]}),d({name:"kendoListView",defaultOption:h,watch:{data:function(b){a.kendo.setDataSource(this,b)}},templates:["template","editTemplate"]}),d({name:"kendoMenu",async:!0}),d({name:"kendoMenuItem",parent:"kendoMenu",watch:{enabled:j,isOpen:[q,e]},async:!0}),d({name:"kendoNumericTextBox",defaultOption:w,events:{change:w},watch:{enabled:j,value:w,max:function(a){this.options.max=a,this.value()>a&&this.value(a)},min:function(a){this.options.min=a,this.value()<a&&this.value(a)}}}),d({name:"kendoPanelBar",async:!0}),d({name:"kendoPanelItem",parent:"kendoPanelBar",updateableOptions:[j],watch:{enabled:j,expanded:[k,f]},async:!0}),d({name:"kendoRangeSlider",defaultOption:x,events:{change:x},watch:{values:x,enabled:[j,i]}}),d({name:"kendoSlider",defaultOption:w,events:{change:w},watch:{value:w,enabled:[j,i]}}),d({name:"kendoSplitter",async:!0}),d({name:"kendoSplitterPane",parent:"kendoSplitter",watch:{max:o,min:p,size:u,expanded:[k,f]},async:!0}),d({name:"kendoTabStrip",async:!0}),d({name:"kendoTab",parent:"kendoTabStrip",watch:{selected:function(a,b){this.select(b?a:null)},enabled:j},async:!0}),d({name:"kendoTimePicker",defaultOption:w,events:{change:w},watch:{max:o,min:p,value:w,enabled:j,isOpen:[q,e]}}),d({name:"kendoTreeView",async:!0}),d({name:"kendoTreeItem",parent:"kendoTreeView",watch:{enabled:j,expanded:[k,f],select:function(a,b){this.select(b?a:null)}},async:!0}),d({name:"kendoUpload",watch:{enabled:[j,i]}}),d({name:"kendoWindow",events:{open:{writeTo:n,value:!0},close:{writeTo:n,value:!1}},watch:{content:g,title:v,isOpen:[q,e]}})})(ko,jQuery)